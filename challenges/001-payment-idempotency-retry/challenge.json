{
  "id": "001-payment-idempotency-retry",
  "title": "Payment Capture Duplicate Charge Bug",
  "stack": "Node.js + Express",
  "skill": ["debugging"],
  "area": ["backend", "payments"],
  "difficulty": 3,
  "time_estimate_minutes": 35,
  "concepts": [
    "idempotency",
    "retry logic",
    "distributed systems",
    "payment processing",
    "request lifecycle",
    "side effects",
    "async error handling"
  ],
  "bug_type": "idempotency-violation-under-retries",
  "primary_skill": "Tracing request lifecycle and reasoning about side effects across async layers",
  "constraints": [
    "API contract must not change",
    "Retries must remain enabled",
    "Do not modify tests",
    "Backward compatibility required"
  ],
  "second_order_conditions": [
    "Payment must be captured at most once per orderId",
    "Transient failures must still succeed via retries"
  ],
  "files_involved": [
    "src/paymentService.js",
    "src/gatewayClient.js",
    "src/idempotencyStore.js"
  ],
  "visible_test_count": 5,
  "hidden_test_count": 5
}

